<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spaceholderz | Institute for Life Design Studies</title>
    <meta name="description"
        content="Spaceholderz: Institute for Life Design Studies combining Astrology, History, and Semiotics to understand the archetypal forces of reality.">
    <link rel="stylesheet" href="static/styles.css">
</head>

<body>

    <header>
        <div class="container">
            <nav>
                <div class="logo"><a href="index.html"></a>SPACEHOLDERZ</a></div>
                <div class="nav-links">
                    <a href="#philosophy">Philosophy</a>
                    <a href="services.html">Services</a>
                    <a href="#free-guide" class="btn btn-primary"
                        style="padding: 0.5rem 1.5rem; font-size: 0.9rem;">Join Us</a>
                </div>
                <button class="hamburger" id="hamburger" aria-label="Toggle navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </nav>
        </div>
    </header>

    <br>
    <section class="hero">
        <div class="container">
            <div class="hero-content fade-in">
                <h2>Institute for Life Design Studies</h2>
                <!-- <p class="subtitle">Institute for Life Design</p> -->
                <p>Recognize the exquisite design and explore the nature of being.</p>
                <br>
                <br>
                <a href="#philosophy" class="btn btn-primary">Learn More</a>
            </div>
        </div>
    </section>

    <section id="philosophy" class="philosophy">
        <div class="container">
            <h2>The Sacred Design</h2>
            <p style="max-width: 800px; margin: 0 auto;">
                The sacred flows where space is free and receptive. <br>We guide students in creating that
                space and moving wisdom between worlds.
            </p>
        </div>
    </section>

    <section class="curriculum">
        <div class="container">
            <h2>The Trinity of Knowledge</h2>
            <p style="text-align: center;">A multidisciplinary curriculum.</p>

            <div class="modules-grid">
                <div class="module-card">
                    <span class="module-number">01</span>
                    <h3>Astrology</h3>
                    <p>The living art revealing inner truth.</p>
                </div>
                <div class="module-card">
                    <span class="module-number">02</span>
                    <h3>History</h3>
                    <p>The systematic investigation and recording of events.</p>
                </div>
                <div class="module-card">
                    <span class="module-number">03</span>
                    <h3>Semiotics</h3>
                    <p>The study of signs and symbols.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="quotes-section">
        <div class="container">
            <div class="quotes-grid">
                <!-- <div class="quote-card">
                    <blockquote>"As above, so below."</blockquote>
                    <cite>— The Emerald Tablet</cite>
                </div> -->
                <div class="quote-card">
                    <blockquote>"What the best astrology does, of course, is unshackle you from fear, arm you with
                        self-knowledge, help you to feel at one with the great, pulsing universe — set you free."
                    </blockquote>
                    <cite></cite>
                </div>
                <!-- <div class="quote-card">
                    <blockquote>"I don't believe in astrology; I'm a Sagittarius and we're skeptical."</blockquote>
                    <cite>— Arthur C. Clarke</cite>
                </div>
                <div class="quote-card">
                    <blockquote>"It is better to know how to learn, than to know."</blockquote>
                    <cite></cite>
                </div> -->

            </div>
        </div>
    </section>



    <section class="lead-magnet">
        <div class="container">
            <div class="lead-magnet-container">
                <h2>Get the "Astrology 101" Primer</h2>
                <p>Start your journey with our practical primer. Discover the core concepts before the full curriculum
                    begins.</p>

                <form id="leadForm" class="signup-form">
                    <div class="form-group">
                        <label for="email">Your Best Email Address</label>
                        <input type="email" id="email" name="email" placeholder="e.g., student@spaceholderz.edu"
                            required>
                    </div>
                    <div class="gdpr-text">
                        <input type="checkbox" id="gdpr" name="gdpr" required>
                        <label for="gdpr">I agree to receive the free PDF and future updates from Spaceholderz. I
                            understand
                            I can unsubscribe at any time. (GDPR Compliant)</label>
                    </div>
                    <button type="submit" id="submitBtn" class="btn btn-primary"
                        style="width: 100%; margin-top: 1.5rem;">Send My Free
                        Guide</button>
                </form>

                <div id="successState" class="success-message">
                    <h3>✨ Check Your Inbox!</h3>
                    <p style="color: inherit;">A confirmation email is on its way. Please click the link in that email
                        to verify your address and receive your free copy of the guide.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">↑</button>

    <footer>
        <div class="container">
            <p>&copy; 2021 Spaceholderz Institute. All knowledge to all the people.</p>
        </div>
    </footer>

    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // Supabase Configuration
        const SUPABASE_URL = 'https://absxlbvipopgdqzqkyme.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_QI_kxamETVDcCVVu_VUOug_x3lJfrDi';

        // Use a unique variable name to avoid "Identifier already declared" errors
        // with the Supabase global object from the CDN.
        let astroSupabase;

        try {
            // The CDN typically puts 'supabase' or 'Supabase' in the window.
            const creator = window.supabase?.createClient || window.Supabase?.createClient;
            if (creator) {
                astroSupabase = creator(SUPABASE_URL, SUPABASE_KEY);
            }
        } catch (e) {
            console.error('Supabase initialization failed:', e);
        }

        const leadForm = document.getElementById('leadForm');

        if (leadForm) {
            leadForm.addEventListener('submit', async function (e) {
                // IMMEDIATELY prevent default to stop page reload
                e.preventDefault();
                console.log('Form submission intercepted successfully');

                const emailInput = document.getElementById('email');
                const email = emailInput.value;
                const gdpr = document.getElementById('gdpr').checked;
                const submitBtn = document.getElementById('submitBtn');

                if (email && gdpr && astroSupabase) {
                    submitBtn.disabled = true;
                    const originalText = submitBtn.innerText;
                    submitBtn.innerText = 'Sending...';

                    try {
                        // 1. Trigger Supabase Auth with double opt-in (Email Confirmation)
                        const { data: authData, error: authError } = await astroSupabase.auth.signUp({
                            email: email,
                            password: Math.random().toString(36).slice(-12),
                            options: {
                                data: {
                                    gdpr_consent: true,
                                    source: 'spaceholderz_site'
                                }
                            }
                        });

                        if (authError) throw authError;

                        // 2. record lead in table (if public permissions allow)
                        try {
                            await astroSupabase.from('leads').insert([{ email: email, gdpr_consent: true }]);
                        } catch (dbErr) {
                            console.warn('DB Insert skipped or failed:', dbErr.message);
                        }

                        // 3. Success State UI
                        document.getElementById('leadForm').style.display = 'none';
                        document.getElementById('successState').style.display = 'block';

                    } catch (err) {
                        console.error('Submission error:', err.message);
                        alert('Submission failed: ' + err.message);
                        submitBtn.disabled = false;
                        submitBtn.innerText = originalText;
                    }
                } else if (!astroSupabase) {
                    alert('Connection error (Supabase not loaded). Please check your internet or try again later.');
                }
            });
        }

        // Back to Top Button with Custom Smooth Scroll
        const backToTopBtn = document.getElementById('backToTop');

        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        });

        // Custom smooth scroll function for slower, more controlled animation
        function smoothScrollToTop(duration = 1500) {
            const startPosition = window.pageYOffset;
            const startTime = performance.now();

            function easeInOutCubic(t) {
                return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
            }

            function animation(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easing = easeInOutCubic(progress);

                window.scrollTo(0, startPosition * (1 - easing));

                if (progress < 1) {
                    requestAnimationFrame(animation);
                }
            }

            requestAnimationFrame(animation);
        }

        backToTopBtn.addEventListener('click', () => {
            smoothScrollToTop(1500); // 1.5 seconds duration
        });

        // Hamburger Menu Toggle
        const hamburgerBtn = document.getElementById('hamburger');
        const navLinks = document.querySelector('.nav-links');

        hamburgerBtn.addEventListener('click', () => {
            hamburgerBtn.classList.toggle('active');
            navLinks.classList.toggle('open');
        });

        // Close menu when a link is clicked
        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                hamburgerBtn.classList.remove('active');
                navLinks.classList.remove('open');
            });
        });
    </script>
</body>

</html>